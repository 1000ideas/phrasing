<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Phrasing by infinum</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Phrasing</h1>
          <h2>Edit phrases inline for your Ruby on Rails applications!</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/infinum/phrasing/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/infinum/phrasing/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/infinum/phrasing" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="phrasing" class="anchor" href="#phrasing"><span class="octicon octicon-link"></span></a>Phrasing!</h1>

<p>Phrasing is a gem for live editing phrases (copy) on websites.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Include the gem in your Gemfile</p>

<div class="highlight highlight-ruby"><pre><span class="n">gem</span> <span class="s2">"phrasing"</span>
</pre></div>

<p>Run the install script:</p>

<div class="highlight highlight-ruby"><pre><span class="n">rake</span> <span class="ss">phrasing</span><span class="p">:</span><span class="n">install</span>
</pre></div>

<p>This will create a migration file and a config file where you can edit the name of the route to see all the phrases.</p>

<p>Migrate your database</p>

<div class="highlight highlight-ruby"><pre><span class="n">rake</span> <span class="ss">db</span><span class="p">:</span><span class="n">migrate</span>
</pre></div>

<h2>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h2>

<p>The rake task will also generate a PhrasingHelper.rb file in your <tt>app/helpers</tt> folder where you will need to implement your <tt>can_edit_phrases?</tt> method. Example:</p>

<div class="highlight highlight-ruby"><pre><span class="k">module</span> <span class="nn">PhrasingHelper</span>

  <span class="k">def</span> <span class="nf">can_edit_phrases?</span>
    <span class="n">current_user</span><span class="o">.</span><span class="n">is_admin?</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>

<p>Include the phrasing <strong>html</strong> initializer at the top of your body</p>

<div class="highlight highlight-haml"><pre><span class="p">=</span> <span class="n">render</span> <span class="s1">'phrasing/initializer'</span>
</pre></div>

<p>Require the <strong>javascript</strong> file (most often in your application.js):</p>

<div class="highlight highlight-javascript"><pre><span class="c1">//= require phrasing</span>
</pre></div>

<p>Require the <strong>stylesheet</strong> file (most often in your application.css):</p>

<div class="highlight highlight-javascript"><pre><span class="c1">//= require phrasing</span>
</pre></div>

<h2>
<a name="how-to-use-phrasing" class="anchor" href="#how-to-use-phrasing"><span class="octicon octicon-link"></span></a>How to use phrasing?</h2>

<p>Start with adding your phrases simply by writting in your view file:</p>

<pre><code>= phrase('my-first-phrase')
</code></pre>

<p>Apart from editing phrases (basically, Rails translations) you can also inline edit your models attributes, just use the same <code>phrase</code> method, with the first attribute being the record and the second one the records attribute:</p>

<pre><code>= phrase(@post, :title)
</code></pre>

<p>In the above example, <tt><a href="https://github.com/post" class="user-mention">@post</a></tt> is the record with a <tt>title</tt> attribute.</p>

<h2>
<a name="security" class="anchor" href="#security"><span class="octicon octicon-link"></span></a>Security</h2>

<p>Since Phrasing can be used to update any attribute in any table (using the model_phrase method), special care must be taken into consideration from a security standpoint.</p>

<p>By default, Phrasing doesn't allow updating of any attribute apart from &lt;PhrasingPhrase.value. To be able to work with other attributes, you need to whitelist them.</p>

<p>In the <tt>config/initializers/phrasing.rb</tt> file you can whitelist your model attributes like this:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Phrasing</span><span class="o">.</span><span class="n">white_list</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"Post.title"</span><span class="p">,</span> <span class="s2">"Post.body"</span><span class="o">]</span>
</pre></div>

<p>or you can whitelist all of them (not recommended) with:</p>

<div class="highlight highlight-ruby"><pre><span class="no">Phrasing</span><span class="o">.</span><span class="n">allow_update_on_all_models_and_attributes</span> <span class="o">=</span> <span class="kp">true</span>
</pre></div>

<h2>
<a name="upgrading-from-version-2x-to-3x" class="anchor" href="#upgrading-from-version-2x-to-3x"><span class="octicon octicon-link"></span></a>Upgrading from version 2.x to 3.x</h2>

<p>In versions 3.0.0 and above we have added the Phrasing Versioning System which requires an additional table, so if you are upgrading to a 3.x release, run <tt>rake phrasing:install</tt> to get the additional migration file, <tt>rake db:migrate</tt> and thats it.</p>

<h2>
<a name="turbolinks" class="anchor" href="#turbolinks"><span class="octicon octicon-link"></span></a>Turbolinks</h2>

<p>If you're experiencing problems with Rails apps using Turbolinks, include the <a href="https://github.com/kossnocorp/jquery.turbolinks">jQuery-turbolinks</a> gem in your application and simply require it in the following order:</p>

<div class="highlight highlight-javascript"><pre><span class="c1">//= require jquery</span>
<span class="c1">//= require jquery.turbolinks</span>
<span class="c1">//= require phrasing</span>
<span class="c1">//= require turbolinks</span>
</pre></div>

<h2>
<a name="phrasing-appearance" class="anchor" href="#phrasing-appearance"><span class="octicon octicon-link"></span></a>Phrasing Appearance</h2>

<p>The <code>phrase</code> view helper can take the <code>options</code> hash as the last parameter. Features:</p>

<div class="highlight highlight-ruby"><pre><span class="ss">url</span><span class="p">:</span> <span class="n">custom_url</span> <span class="c1"># point Phrasing to other actions in other controllers</span>
<span class="ss">inverse</span><span class="p">:</span> <span class="kp">true</span> <span class="c1"># change the hovered background and underline colors to better fit darker backgrounds</span>
<span class="ss">class</span><span class="p">:</span> <span class="n">custom_class</span> <span class="c1"># add custom CSS classes to your phrases to change the appearance of phrases in your application </span>
<span class="ss">interpolation</span><span class="p">:</span> <span class="p">{</span> <span class="o">%</span><span class="ss">min</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}</span> <span class="c1"># add variables to your translations just like w/ I18n</span>
</pre></div>

<h2>
<a name="authors" class="anchor" href="#authors"><span class="octicon octicon-link"></span></a>Authors</h2>

<p>Copyright (c) 2013, Infinum</p>

<p>Phrasing relies heavily (or is built) on two other libraries: the <a href="https://github.com/Zorros/copycat">Copycat gem</a> and the <a href="https://github.com/tholman/zenpen/tree/master/">ZenPen library</a>. So thank you to the authors and all the contributors! </p>
        </section>

        <footer>
          Phrasing is maintained by <a href="https://github.com/infinum">infinum</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
